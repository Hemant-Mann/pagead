(function(){function r(){window.jQuery.noConflict();var m="function"===typeof window.$&&window.$.fn&&window.$.fn.jquery===jQuery.fn.jquery?window.$:window.jQuery;(function(e,g){var m=function(f,d){function b(){this.prefix="__vnative";this.random=(1E32*d.Math.random()).toString(36)}b.prototype={set:function(a,c,n,h){a=this.prefix+a;var d=new Date;d.setTime(d.getTime()+864E5*n);n="expires="+d.toUTCString();a=a+"="+c+"; "+n+"; ";h&&(a+=" path="+h+";");f.cookie=a},get:function(a){a=this.prefix+a;a+="=";
for(var c=f.cookie.split(";"),n=0;n<c.length;n++){for(var h=c[n];" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(a))return h.substring(a.length,h.length)}return""},erase:function(a){a=this.prefix+a;f.cookie=a+'=; expires=Thu, 01 Jan 1970 00:00:00 UTC";'}};return new b}(e.document,e),p=function(f,d){function b(){this.regions=[]}b.prototype={treeDepth:function(a){a=a.children();for(var c=0;0<a.length;)a=a.children(),c+=1;return c},_nodeIdentifier:function(a){var c="",c=c+a.prop("tagName");a.attr("id")&&
(c+="#"+a.attr("id").replace(/[0-9]+/g,""));a.attr("class")&&(a=a.attr("class").split(/\s+/),3>=a.length&&(a.sort(),d.each(a,function(a,h){h=h.replace(/[0-9]+/g,"");c+="."+h})));return c},_combComparison:function(a){for(var c={},n={},h=0,b=a.length;h<b;++h){var f=d(a[h]),g=f.prop("tagName");if("SCRIPT"!=g&&"NAV"!=g&&"A"!=g){var e=this._nodeIdentifier(f);"undefined"===typeof c[e]&&(c[e]=0);c[e]++;n[e]=h}}h=!1;for(e in c)2<c[e]&&(h=!0,b=d(a[n[e]]),this.regions.push(b));return h},mdr:function(a){if(3<=
this.treeDepth(a)){a=a.children();this._combComparison(a);for(var c=0,n=a.length;c<n;++c){var h=d(a[c]),b=h.prop("tagName");"SCRIPT"!=b&&"NAV"!=b&&"A"!=b&&this.mdr(h)}}}};return new b}(e,g),l=function(f,d){function b(){this.loaded=!1;this.parser=null;this.domain="track.vnative.com";this.sent={};this.aduid=null;this.contents={}}b.prototype={init:function(){this.loaded=!0;this.parser=new f.UAParser},_mobile:function(){return f.navigator.userAgent.match(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|nokia/i)instanceof
Array?"1":"0"},_deviceInfo:function(){if(!this.loaded||!this.parser)return{};var c=this.parser.getResult(),a={height:f.screen.height,width:f.screen.width},c={browser:c.browser.name,os:c.os.name},b=this._mobile();return{screen:a,device:c,mobile:b}},store:function(c){var a=this._deviceInfo();this.aduid||(this.aduid=c.aduid);a.aduid=this.aduid;a.cid=c.cid;a.loc=btoa(f.location.hostname);this.contents[c.cid]=a},_inViewPort:function(c){c=c.getBoundingClientRect();return 0<=c.top&&0<=c.left&&c.bottom<=
(f.innerHeight||document.documentElement.clientHeight)&&c.right<=(f.innerWidth||document.documentElement.clientWidth)},_send:function(c){var a=this;a.loaded?(a.store({cid:c}),d.ajax({url:"//"+a.domain+"/impression?callback=?",type:"GET",async:!0,dataType:"jsonp",jsonp:"callback",data:a.contents[c]}).done(function(b){b.success&&(a.sent[c]=!0)}).fail(function(){a.sent[c]=!1})):a.sent[c]=!1},attach:function(c,a){var b=this;b.sent[a]=!1;d(f).on("resize scroll",function(){!b.sent[a]&&b._inViewPort(c[0])&&
(b.sent[a]=!0,b._send(a))})}};var a=new b;d.ajaxSetup({cache:!0});d.getScript("//serve.vnative.com/uaparser.min.js",function(c){a.init()});return a}(e,g),k=function(){function f(){this.domain="serve.vnative.com";this.trackingDomain="track.vnative.com";this.ads={};this.text={};this.dm=p;this.ckid=null;this.adunit=g(".byvnative").data("slot")||"slot";this.publisher=g(".byvnative").data("client")||"publisher";this.publisher=this.publisher.replace(/pub-/g,"")}f.prototype={_init:function(d){var b={dest:d._url,
campaign:d._id,time:e.Date.now()};m.get("Tracking")||m.set("Tracking",m.random,365);this.ckid=m.get("Tracking");this.ads[d._id]=b;l.store({aduid:this.adunit,cid:b.campaign})},get:function(d,b){var a=this;g.ajax({url:"//"+a.domain+"/?callback=?&uid="+a.publisher+"&aduid="+a.adunit,type:"GET",async:!0,jsonp:"callback",dataType:"jsonp"}).done(function(c){c._id||b.call(a,{error:"No Ads found"},{});a._init(c);"video"==c._type&&"undefined"===typeof e.hPlayer?g.getScript("//"+a.domain+"/js/player.js",function(){b.call(a,
null,c,d)}):b.call(a,null,c,d)}).fail(function(c){b.call(a,c,null)})},_trackLink:function(d){d=this.ads[d];var b;b="//"+(this.trackingDomain+"/click");b+="?slot="+this.adunit;b+="&pid="+this.publisher;b+="&cid="+d.campaign;b+="&ckid="+this.ckid;b+="&dest="+btoa(d.dest);return b+="&ti="+d.time},_attach:function(d,b){var a=g(d),c=this._trackLink(b);a.on("click",function(a){a.preventDefault();0<g(this).parent().find("video").length||(e.location.href=c)});a.mousedown(function(a){a.preventDefault();if(!(0<
g(this).parent().find("video").length))switch(a.which){case 2:case 3:e.open(c,"_newtab");break;default:e.location.href=c}})},modifyText:function(d,b){var a=this;a._attach(d,b);"undefined"===typeof a.text[b]&&(a.text[b]={});if(3==d.nodeType){var c=g(d).text(),c=c.replace(/\s/g,"");0!=c.length&&(c.match(/readmore|ContinueReading/i)instanceof Array?d.nodeValue="Read More":11>=c.length?d.nodeValue="":a.text[b][c.length]=d)}else 1==d.nodeType&&g(d).contents().each(function(){a.modifyText(this,b)})},replace:function(d,
b,a){a=this.text[a];var c=Object.keys(a),c=c.map(function(a){return Number(a)});c.sort(function(a,c){return a-c});2<=c.length&&(a[c.pop()].nodeValue=b);a[c.pop()].nodeValue=d},attachImp:function(d,b){l.attach(d,b)}};return new f}();e[e.vNativeObject||"vnative"]=k})(window,jQuery);m(document).ready(function(){for(var e=function(a){a=Object.keys(a);a=a.map(function(a){return Number(a)});a.sort(function(a,c){return a-c});return a},g=m("body").children(),q=window[window.vNativeObject||"vnative"],p=q.dm,
l={},k=0,f=g.length;k<f;++k){var d=m(g[k]),b=d.prop("tagName");if("DIV"==b||"SECTION"==b||"ARTICLE"==b||"MAIN"==b)b=p.treeDepth(d),Array.isArray(l[b])||(l[b]=[]),l[b].push(d)}g=e(l);g=function(a,b){var d,f=[];for(d=b.pop();a[d]&&0<a[d].length;)f.push(a[d].pop());for(d=b.pop();a[d]&&0<a[d].length;)f.push(a[d].pop());return f}(l,g);k=0;for(f=g.length;k<f;++k)p.mdr(g[k]);var a={};m.each(p.regions,function(c,b){var d=b.parent().children().length,f=b.prop("tagName");"SCRIPT"!=f&&"NAV"!=f&&"A"!=f&&"META"!=
f&&(a[d]=b)});g=e(a);if(0!==g.length){p={};k=0;f={};for(l={};k<g.length;)l=g[k],f=a[l].find("a").text().length,p[f]=a[l],k++;e=e(p);f=p[e.pop()];l=p[e.pop()];if("function"===typeof f.has&&f.has(l).length)d=l;else if(f)d=f;else return!1;e=Number(m(".byvnative").data("ad-num")||1);for(k=0;k<e;++k)q.get({index:k,total:e},function(a,b,f){var e;if(a)console.log(a);else{e=d.parent().children();a=d.clone();a.attr("id","vNative-"+Number(k+1));a.insertAfter(m(e[1]));e=a.find("a");"undefined"!==typeof e&&e.attr("href",
b._url);this.modifyText(a[0],b._id);this.replace(b._title,b._description,b._id);if(e=a.find("img"))e.each(function(){m.each(this.attributes,function(){this.specified&&this.value.match(/^http:\/\//i)&&(this.value=b._image)})}),e.attr("src",b._image),e.attr("srcset",b._image);b._video&&1<=b._video.length&&e&&window.hPlayer.create(e,{_video:b._video,_image:b._image});e=m("<div><small>Sponsored by vNative</small></div>");e.insertBefore(a.children()[0]).css({"z-index":"100","text-align":"center"});this.attachImp(a,
b._id);f.index==f.total-1&&"undefined"!==typeof window.hPlayer&&window.hPlayer.init()}})}})}if(window.jQuery&&window.jQuery.fn)r();else{window.jQuery=null;var q=document.createElement("script");q.setAttribute("type","text/javascript");q.setAttribute("src","//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js");q.readyState?q.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||r()}:q.onload=r;(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(q)}})();