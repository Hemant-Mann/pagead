(function(){function u(){function t(c){c.get({},function(f,c,k){if(f)return console.info(f);f=q(".byvnative");k=q('<div class="vnativeBanner"><img src="'+c._image+'" width="'+(f.data("width")||300)+'" alt="" height="'+(f.data("height")||200)+'" /></div>');k.css("text-align","center");k.insertAfter(f);this._attach(k[0],c._id);this.attachImp(k,c._id);console.info("Banner Ad loaded!!")})}
function u(c){var f=q("body").children();if(!0===c.init)return!1;for(var m=c.dm,k={},g=0,l=f.length;g<l;++g){var p=q(f[g]),r=p.prop("tagName");if("DIV"==r||"SECTION"==r||"ARTICLE"==r||"MAIN"==r)r=m.treeDepth(p),Array.isArray(k[r])||(k[r]=[]),k[r].push(p)}f=v(k);f=function(a,d){var n,e=[];for(n=d.pop();a[n]&&0<a[n].length;)e.push(a[n].pop());for(n=d.pop();a[n]&&0<a[n].length;)e.push(a[n].pop());return e}(k,f);g=0;for(l=f.length;g<l;++g)m.mdr(f[g]);var h={};q.each(m.regions,function(a,d){var n=d.parent().children().length,
e=d.prop("tagName");"SCRIPT"!=e&&"NAV"!=e&&"A"!=e&&"META"!=e&&(h[n]=d)});f=v(h);if(0!==f.length){m={};g=0;l={};for(k={};g<f.length;)k=f[g],l=h[k].find("a").text().length,m[l]=h[k],g++;g=v(m);l=m[g.pop()];k=m[g.pop()];if("function"===typeof l.has&&l.has(k).length)p=k;else if(l)p=l;else return!1;for(var b=Number(q(".byvnative").data("ad-num")||1),l=[],g=0;g<b;++g)l.push(Math.round(100*Math.random()));l.forEach(function(a,d){c.get({index:d,total:b},function(a,e,h){if(a)return console.info(a);var b;b=
p.parent().children();a=p.clone();a.attr("id","vNative-"+Number(d+1));a.insertAfter(q(b[1]));console.info("Ad Loaded");console.info(a);b=a.find("a");"undefined"!==typeof b&&b.attr("href",e._url);this.modifyText(a[0],e._id);this.replace(e._title,e._description,e._id);if(b=a.find("img"))b.each(function(){q.each(this.attributes,function(){this.specified&&this.value.match(/^http:\/\//i)&&(this.value=e._image)})}),b.attr("src",e._image),b.attr("srcset",e._image);e._video&&1<=e._video.length&&b&&window.hPlayer.create(b,
{_video:e._video,_image:e._image});this.attachImp(a,e._id);h.index==h.total-1&&"undefined"!==typeof window.hPlayer&&window.hPlayer.init()})})}}window.$!==window.jQuery&&window.jQuery.noConflict();var q="function"===typeof window.$&&window.$.fn&&window.$.fn.jquery===jQuery.fn.jquery?window.$:window.jQuery;(function(c,f){var m=function(c,h){function b(){this.prefix="__vnative";this.random=(1E32*h.Math.random()).toString(36)}b.prototype={set:function(a,d,n,e){a=this.prefix+a;var b=new Date;b.setTime(b.getTime()+
864E5*n);n="expires="+b.toUTCString();a=a+"="+d+"; "+n+"; ";c.cookie=e?a+(" path="+e+";"):a+" path=/;"},get:function(a){a=this.prefix+a;a+="=";for(var d=c.cookie.split(";"),b=0;b<d.length;b++){for(var e=d[b];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return""},erase:function(a){a=this.prefix+a;c.cookie=a+'=; expires=Thu, 01 Jan 1970 00:00:00 UTC";'}};return new b}(c.document,c),k=function(c,h){function b(){this.regions=[]}b.prototype={treeDepth:function(a){a=
a.children();for(var d=0;0<a.length;)a=a.children(),d+=1;return d},_nodeIdentifier:function(a){var d="",d=d+a.prop("tagName");a.attr("id")&&(d+="#"+a.attr("id").replace(/[0-9]+/g,""));a.attr("class")&&(a=a.attr("class").split(/\s+/),3>=a.length&&(a.sort(),h.each(a,function(a,e){e=e.replace(/[0-9]+/g,"");d+="."+e})));return d},_combComparison:function(a){for(var d={},b={},e=0,c=a.length;e<c;++e){var f=h(a[e]),k=f.prop("tagName");if("SCRIPT"!=k&&"NAV"!=k&&"A"!=k){var g=this._nodeIdentifier(f);"undefined"===
typeof d[g]&&(d[g]=0);d[g]++;b[g]=e}}e=!1;for(g in d)2<d[g]&&(e=!0,c=h(a[b[g]]),this.regions.push(c));return e},mdr:function(a){if(3<=this.treeDepth(a)){a=a.children();this._combComparison(a);for(var d=0,b=a.length;d<b;++d){var e=h(a[d]),c=e.prop("tagName");"SCRIPT"!=c&&"NAV"!=c&&"A"!=c&&this.mdr(e)}}}};return new b}(c,f),g=function(c,h){function b(){this.loaded=!1;this.parser=null;this.domain="track.vnative.com";this.sent={};this.pid=this.contents={}}b.prototype={init:function(){this.loaded=!0;this.parser=
new c.UAParser},_mobile:function(){var a=c.navigator.userAgent;return a.match(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|nokia/i)instanceof Array?"1":a.match(/mobile/i)?"1":"0"},_deviceInfo:function(){if(!this.loaded||!this.parser)return{};
var a=this.parser.getResult(),b={height:c.screen.height,width:c.screen.width},a={browser:a.browser.name,os:a.os.name},e=this._mobile();return{screen:b,device:a,mobile:e}},store:function(a){var b=this._deviceInfo();b.cid=a.cid;b.pid=this.pid;b.loc=btoa(c.location.hostname);this.contents[a.cid]=b},_inViewPort:function(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(c.innerHeight||document.documentElement.clientHeight)&&a.right<=(c.innerWidth||document.documentElement.clientWidth)},
_send:function(a){var b=this;b.loaded?(b.store({cid:a}),h.ajax({url:"//"+b.domain+"/impression?callback=?",type:"GET",async:!0,dataType:"jsonp",jsonp:"callback",data:b.contents[a]}).done(function(e){e.success&&(b.sent[a]=!0)}).fail(function(){b.sent[a]=!1})):b.sent[a]=!1},attach:function(a,b){var e=this;e.sent[b]=!1;h(c).on("resize scroll",function(){!e.sent[b]&&e._inViewPort(a[0])&&(e.sent[b]=!0,e._send(b))})}};var a=new b;h.ajaxSetup({cache:!0});h.getScript("//serve.vnative.com/uaparser.min.js",
function(b){a.init()});return a}(c,f),l=function(){function l(){this.domain="serve.vnative.com";this.trackingDomain="track.vnative.com";this.ads={};this.text={};this.adType=f(".byvnative").data("type")||"native";this.dm=k;this.ckid=null;this.init=!1;this.publisher=f(".byvnative").data("client")||"publisher";this.publisher=this.publisher.replace(/pub-/g,"")}l.prototype={_init:function(h){var b={dest:h._url,campaign:h._id,time:c.Date.now()};m.get("Tracking")||m.set("Tracking",m.random,365);this.ckid=
m.get("Tracking");this.ads[h._id]=b;this.init=!0;g.pid=this.publisher;g.store({cid:b.campaign})},get:function(h,b){var a=this;f.ajax({url:"//"+a.domain+"/?callback=?&uid="+a.publisher+"&type="+a.adType,type:"GET",async:!0,jsonp:"callback",dataType:"jsonp"}).done(function(d){d._id?(a._init(d),"video"==d._type&&"undefined"===typeof c.hPlayer?f.getScript("//"+a.domain+"/js/player.js",function(){b.call(a,null,d,h)}):b.call(a,null,d,h)):b.call(a,{error:"No Ads found"},{})}).fail(function(d){b.call(a,d,
null)})},_trackLink:function(c){c=this.ads[c];var b;b="//"+(this.trackingDomain+"/click");b+="?pid="+this.publisher;b+="&cid="+c.campaign;b+="&ckid="+this.ckid;b+="&dest="+btoa(c.dest);return b+="&ti="+c.time},_attach:function(h,b){var a=f(h),d=this._trackLink(b);a.on("click",function(a){a.preventDefault();0<f(this).parent().find("video").length||(c.location.href=d)});a.mousedown(function(a){a.preventDefault();if(!(0<f(this).parent().find("video").length))switch(a.which){case 2:case 3:c.open(d,"_newtab");
break;default:c.location.href=d}})},modifyText:function(c,b){var a=this;a._attach(c,b);"undefined"===typeof a.text[b]&&(a.text[b]={});if(3==c.nodeType){var d=f(c).text(),d=d.replace(/\s/g,"");0!=d.length&&(d.match(/readmore|ContinueReading/i)instanceof Array?c.nodeValue="Read More":11>=d.length?c.nodeValue="":a.text[b][d.length]=c)}else 1==c.nodeType&&f(c).contents().each(function(){a.modifyText(this,b)})},replace:function(c,b,a){a=this.text[a];var d=Object.keys(a),d=d.map(function(a){return Number(a)});
d.sort(function(a,b){return a-b});2<=d.length&&(a[d.pop()].nodeValue=b);a[d.pop()].nodeValue=c},attachImp:function(c,b){g.attach(c,b)}};return l}(),p=c.vNativeObject||"vnative";if(c[p]&&!0===c[p].init)return!1;c[p]=new l})(window,jQuery);var v=function(c){c=Object.keys(c);c=c.map(function(c){return Number(c)});c.sort(function(c,m){return c-m});return c};q(document).ready(function(){var c=window[window.vNativeObject||"vnative"];switch(c.adType){case "native":u(c);break;case "banner":t(c);break;default:u(c)}})}
if(window.jQuery&&window.jQuery.fn)u();else{window.jQuery=null;var t=document.createElement("script");t.setAttribute("type","text/javascript");t.setAttribute("src","//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js");t.readyState?t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||u()}:t.onload=u;(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(t)}})();