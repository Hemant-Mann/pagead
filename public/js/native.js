(function(){function t(){window.$!==window.jQuery&&window.jQuery.noConflict();var p="function"===typeof window.$&&window.$.fn&&window.$.fn.jquery===jQuery.fn.jquery?window.$:window.jQuery;(function(h,f){var p=function(m,c){function e(){this.prefix="__vnative";this.random=(1E32*c.Math.random()).toString(36)}e.prototype={set:function(a,b,g,d){a=this.prefix+a;var c=new Date;c.setTime(c.getTime()+864E5*g);g="expires="+c.toUTCString();a=a+"="+b+"; "+g+"; ";d&&(a+=" path="+d+";");m.cookie=a},get:function(a){a=
this.prefix+a;a+="=";for(var b=m.cookie.split(";"),g=0;g<b.length;g++){for(var d=b[g];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""},erase:function(a){a=this.prefix+a;m.cookie=a+'=; expires=Thu, 01 Jan 1970 00:00:00 UTC";'}};return new e}(h.document,h),q=function(m,c){function e(){this.regions=[]}e.prototype={treeDepth:function(a){a=a.children();for(var b=0;0<a.length;)a=a.children(),b+=1;return b},_nodeIdentifier:function(a){var b="",b=b+a.prop("tagName");
a.attr("id")&&(b+="#"+a.attr("id").replace(/[0-9]+/g,""));a.attr("class")&&(a=a.attr("class").split(/\s+/),3>=a.length&&(a.sort(),c.each(a,function(a,d){d=d.replace(/[0-9]+/g,"");b+="."+d})));return b},_combComparison:function(a){for(var b={},g={},d=0,e=a.length;d<e;++d){var m=c(a[d]),h=m.prop("tagName");if("SCRIPT"!=h&&"NAV"!=h&&"A"!=h){var f=this._nodeIdentifier(m);"undefined"===typeof b[f]&&(b[f]=0);b[f]++;g[f]=d}}d=!1;for(f in b)2<b[f]&&(d=!0,e=c(a[g[f]]),this.regions.push(e));return d},mdr:function(a){if(3<=
this.treeDepth(a)){a=a.children();this._combComparison(a);for(var b=0,g=a.length;b<g;++b){var d=c(a[b]),e=d.prop("tagName");"SCRIPT"!=e&&"NAV"!=e&&"A"!=e&&this.mdr(d)}}}};return new e}(h,f),l=function(f,c){function e(){this.loaded=!1;this.parser=null;this.domain="track.vnative.com";this.sent={};this.pid=this.contents={}}e.prototype={init:function(){this.loaded=!0;this.parser=new f.UAParser},_mobile:function(){return f.navigator.userAgent.match(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|nokia/i)instanceof
Array?"1":"0"},_deviceInfo:function(){if(!this.loaded||!this.parser)return{};var b=this.parser.getResult(),a={height:f.screen.height,width:f.screen.width},b={browser:b.browser.name,os:b.os.name},d=this._mobile();return{screen:a,device:b,mobile:d}},store:function(a){var g=this._deviceInfo();g.cid=a.cid;g.pid=this.pid;g.loc=btoa(f.location.hostname);this.contents[a.cid]=g},_inViewPort:function(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(f.innerHeight||document.documentElement.clientHeight)&&
a.right<=(f.innerWidth||document.documentElement.clientWidth)},_send:function(a){var g=this;g.loaded?(g.store({cid:a}),c.ajax({url:"//"+g.domain+"/impression?callback=?",type:"GET",async:!0,dataType:"jsonp",jsonp:"callback",data:g.contents[a]}).done(function(d){d.success&&(g.sent[a]=!0)}).fail(function(){g.sent[a]=!1})):g.sent[a]=!1},attach:function(a,g){var d=this;d.sent[g]=!1;c(f).on("resize scroll",function(){!d.sent[g]&&d._inViewPort(a[0])&&(d.sent[g]=!0,d._send(g))})}};var a=new e;c.ajaxSetup({cache:!0});
c.getScript("//serve.vnative.com/uaparser.min.js",function(b){a.init()});return a}(h,f),k=function(){function k(){this.domain="serve.vnative.com";this.trackingDomain="track.vnative.com";this.ads={};this.text={};this.dm=q;this.ckid=null;this.init=!1;this.publisher=f(".byvnative").data("client")||"publisher";this.publisher=this.publisher.replace(/pub-/g,"")}k.prototype={_init:function(c){var e={dest:c._url,campaign:c._id,time:h.Date.now()};p.get("Tracking")||p.set("Tracking",p.random,365);this.ckid=
p.get("Tracking");this.ads[c._id]=e;this.init=!0;l.pid=this.publisher;l.store({cid:e.campaign})},get:function(c,e){var a=this;f.ajax({url:"//"+a.domain+"/?callback=?&uid="+a.publisher,type:"GET",async:!0,jsonp:"callback",dataType:"jsonp"}).done(function(b){b._id||e.call(a,{error:"No Ads found"},{});a._init(b);"video"==b._type&&"undefined"===typeof h.hPlayer?f.getScript("//"+a.domain+"/js/player.js",function(){e.call(a,null,b,c)}):e.call(a,null,b,c)}).fail(function(b){e.call(a,b,null)})},_trackLink:function(c){c=
this.ads[c];var e;e="//"+(this.trackingDomain+"/click");e+="?pid="+this.publisher;e+="&cid="+c.campaign;e+="&ckid="+this.ckid;e+="&dest="+btoa(c.dest);return e+="&ti="+c.time},_attach:function(c,e){var a=f(c),b=this._trackLink(e);a.on("click",function(a){a.preventDefault();0<f(this).parent().find("video").length||(h.location.href=b)});a.mousedown(function(a){a.preventDefault();if(!(0<f(this).parent().find("video").length))switch(a.which){case 2:case 3:h.open(b,"_newtab");break;default:h.location.href=
b}})},modifyText:function(c,e){var a=this;a._attach(c,e);"undefined"===typeof a.text[e]&&(a.text[e]={});if(3==c.nodeType){var b=f(c).text(),b=b.replace(/\s/g,"");0!=b.length&&(b.match(/readmore|ContinueReading/i)instanceof Array?c.nodeValue="Read More":11>=b.length?c.nodeValue="":a.text[e][b.length]=c)}else 1==c.nodeType&&f(c).contents().each(function(){a.modifyText(this,e)})},replace:function(c,e,a){a=this.text[a];var b=Object.keys(a),b=b.map(function(a){return Number(a)});b.sort(function(a,b){return a-
b});2<=b.length&&(a[b.pop()].nodeValue=e);a[b.pop()].nodeValue=c},attachImp:function(c,e){l.attach(c,e)}};return k}(),n=h.vNativeObject||"vnative";if(!0===h[n].init)return!1;h[n]=new k})(window,jQuery);p(document).ready(function(){var h=function(a){a=Object.keys(a);a=a.map(function(a){return Number(a)});a.sort(function(a,c){return a-c});return a},f=p("body").children(),r=window[window.vNativeObject||"vnative"];if(!0===r.init)return!1;for(var q=r.dm,l={},k=0,n=f.length;k<n;++k){var m=p(f[k]),c=m.prop("tagName");
if("DIV"==c||"SECTION"==c||"ARTICLE"==c||"MAIN"==c)c=q.treeDepth(m),Array.isArray(l[c])||(l[c]=[]),l[c].push(m)}f=h(l);f=function(a,b){var c,d=[];for(c=b.pop();a[c]&&0<a[c].length;)d.push(a[c].pop());for(c=b.pop();a[c]&&0<a[c].length;)d.push(a[c].pop());return d}(l,f);k=0;for(n=f.length;k<n;++k)q.mdr(f[k]);var e={};p.each(q.regions,function(a,b){var c=b.parent().children().length,d=b.prop("tagName");"SCRIPT"!=d&&"NAV"!=d&&"A"!=d&&"META"!=d&&(e[c]=b)});f=h(e);if(0!==f.length){q={};k=0;n={};for(l={};k<f.length;)l=f[k],n=e[l].find("a").text().length,q[n]=e[l],k++;h=h(q);n=q[h.pop()];l=q[h.pop()];if("function"===typeof n.has&&n.has(l).length)m=l;else if(n)m=n;else return!1;h=Number(p(".byvnative").data("ad-num")||1);for(k=0;k<h;++k)r.get({index:k,total:h},function(a,b,c){var d;if(a)return console.info(a);d=m.parent().children();a=m.clone();a.attr("id","vNative-"+Number(k+1));a.insertAfter(p(d[1]));d=a.find("a");"undefined"!==typeof d&&d.attr("href",b._url);this.modifyText(a[0],b._id);this.replace(b._title,
b._description,b._id);if(d=a.find("img"))d.each(function(){p.each(this.attributes,function(){this.specified&&this.value.match(/^http:\/\//i)&&(this.value=b._image)})}),d.attr("src",b._image),d.attr("srcset",b._image);b._video&&1<=b._video.length&&d&&window.hPlayer.create(d,{_video:b._video,_image:b._image});p("<div><small>Sponsored by vNative</small></div>").insertBefore(a.children()[0]).css({"z-index":"100","text-align":"center"});this.attachImp(a,b._id);c.index==c.total-1&&"undefined"!==typeof window.hPlayer&&
window.hPlayer.init()})}})}if(window.jQuery&&window.jQuery.fn)t();else{window.jQuery=null;var r=document.createElement("script");r.setAttribute("type","text/javascript");r.setAttribute("src","//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js");r.readyState?r.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||t()}:r.onload=t;(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(r)}})();