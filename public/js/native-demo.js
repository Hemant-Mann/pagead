(function(){function r(){q=window.jQuery.noConflict(!0);t()}function t(){"undefined"===typeof window.$&&"undefined"!==typeof q&&(window.$=q);(function(p,g){function m(){this.domain="serve.vnative.com";this.dm=this.adunit=null;this.text={}}m.prototype={get:function(c){var f=this;g.ajax({url:"//"+f.domain+"/?callback=?",type:"GET",async:!0,jsonpCallback:"jsonCallback",contentType:"application/json",dataType:"jsonp"}).done(function(b){c.call(f,null,b)}).fail(function(b){c.call(f,b,null)})},modifyText:function(c){var f=
this;if(3==c.nodeType){var b=g(c).text(),b=b.replace(/\s/g,"");0!=b.length&&(b.match(/readmore|ContinueReading/i)instanceof Array?c.nodeValue="Read More":11>=b.length?c.nodeValue="":f.text[b.length]=c)}else 1==c.nodeType&&g(c).contents().each(function(){f.modifyText(this)})},replace:function(c,f){var b=this.text,a=Object.keys(b),a=a.map(function(a){return Number(a)});a.sort(function(a,b){return a-b});2<=a.length&&(b[a.pop()].nodeValue=f);b[a.pop()].nodeValue=c}};var n=function(c,f){function b(){this.regions=
[]}b.prototype={treeDepth:function(a){a=a.children();for(var h=0;0<a.length;)a=a.children(),h+=1;return h},_nodeIdentifier:function(a){var h="",h=h+a.prop("tagName");a.attr("id")&&(h+="#"+a.attr("id").replace(/[0-9]+/g,""));a.attr("class")&&(a=a.attr("class").split(/\s+/),3>=a.length&&(a.sort(),f.each(a,function(a,d){d=d.replace(/[0-9]+/g,"");h+="."+d})));return h},_combComparison:function(a){for(var h={},b={},d=0,k=a.length;d<k;++d){var c=f(a[d]),g=c.prop("tagName");if("SCRIPT"!=g&&"NAV"!=g&&"A"!=
g){var e=this._nodeIdentifier(c);"undefined"===typeof h[e]&&(h[e]=0);h[e]++;b[e]=d}}d=!1;for(e in h)2<h[e]&&(d=!0,k=f(a[b[e]]),this.regions.push(k));return d},mdr:function(a){if(3<=this.treeDepth(a)){a=a.children();this._combComparison(a);for(var h=0,b=a.length;h<b;++h){var d=f(a[h]),k=d.prop("tagName");"SCRIPT"!=k&&"NAV"!=k&&"A"!=k&&this.mdr(d)}}}};return new b}(p,g),e=p.vNativeObject||"vnative",l=new m;l.dm=n;p[e]=l})(window,q);$(document).ready(function(){for(var p=function(a){a=Object.keys(a);
a=a.map(function(a){return Number(a)});a.sort(function(a,d){return a-d});return a},g=$("body").children(),m=window[window.vNativeObject||"vnative"],n=m.dm,e={},l=0,c=g.length;l<c;++l){var f=$(g[l]),b=f.prop("tagName");if("DIV"==b||"SECTION"==b||"ARTICLE"==b||"MAIN"==b)b=n.treeDepth(f),Array.isArray(e[b])||(e[b]=[]),e[b].push(f)}g=p(e);g=function(a,b){var d,k=[];for(d=b.pop();a[d]&&0<a[d].length;)k.push(a[d].pop());for(d=b.pop();a[d]&&0<a[d].length;)k.push(a[d].pop());return k}(e,g);l=0;for(c=g.length;l<
c;++l)n.mdr(g[l]);var a={};$.each(n.regions,function(b,c){var d=c.parent().children().length,k=c.prop("tagName");"SCRIPT"!=k&&"NAV"!=k&&"A"!=k&&"META"!=k&&(a[d]=c)});console.log(a);g=p(a);n={};l=0;for(e=c=-1;l<g.length;)e=g[l],c=a[e].find("a").text().length,l++,0!==a[e].find("img").length&&(n[c]=a[e]);console.log(n);p=p(n);c=n[p.pop()];e=n[p.pop()];f=c.has(e).length?e:c;m.get(function(a,b){var d,c;if(!a){d=f.parent().children();c=d.length-1;var e=Math.floor(Math.random()*(c-1+1))+1;c=f.clone();c.attr("id",
"vNative-"+Math.floor(10*Math.random()));c.insertAfter($(d[e]));d=c.find("a");"undefined"!==typeof d&&d.attr("href",b._url);this.modifyText(c[0]);this.replace(b._title,b._description);if(d=c.find("img"))d.each(function(){$.each(this.attributes,function(){this.specified&&this.value.match(/^http:\/\//i)&&(this.value=b._image)})}),d.attr("src",b._image),d.attr("srcset","");c.css({"border-color":"#C1E0FF","border-width":"10px","border-style":"solid"});d=$("<div><small>Sponsored by vNative</small></div>");
d.insertBefore(c.children()[0]).css({"z-index":"100","text-align":"center"});c[0].scrollIntoView()}})})}var q;if(void 0===window.jQuery||window.jQuery.fn.jquery){var m=document.createElement("script");m.setAttribute("type","text/javascript");m.setAttribute("src","//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js");m.readyState?m.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||r()}:m.onload=r;(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(m)}else q=
window.jQuery,t()})();
